<h3>Drivers</h3>

<ul>
  <h3>As a user who needs to manage drivers...</h3>
  <li>On the driver list page, I want to click on a driver, so that I can see that driver's details</li>
  <h3>On the driver's details page, I want to be able to...</h3>
  <li>See the driver's availability status</li>
  <li>See the driver's name</li>
  <li>See the driver's vin</li>
  <li>See the driver's total earnings, as defined by the rules in the "Details" section</li>
  <li>See the driver's average rating</li>
  <li>See a list of trips this driver has driven</li>
  <li>- Click on an individual trip from the list of trips, which will take me to a detail page for that trip</li>
  <li>- Click a link to edit that driver</li>
  <li>- Click a link to delete that driver</li>
</ul>

<ul>
  <% @drivers.each do |driver|  %>
    <li class="list">
      <%= driver.id %> - 
      <%= driver.name %> : 
      <%= driver.vin %>
      <%= driver.available %>
      <%= button_to "Show", driver_path(driver),
          method: "get", class: "button"
      %>
      <%= button_to "Edit", edit_driver_path(driver),
          method: "get", class: "button"
      %>
      <%= button_to "Delete", driver_path(driver),
          method: :delete, class: "button",
          data: {confirm: "Are you sure?"}
      %>
    </li>
  <% end %>
</ul>
<h3>Select an action</h3>
<ul>
  <li>
    <%= button_to "Add New Driver", new_driver_path,
      method: "get", class: "button"
    %>
  </li>
</ul>

<table class='table table-bordered table-striped'>
  <thead>
    <tr>
      <th></th>
      <th>Name</th>
      <th>Vin</th>
      <th>Availability</th>
      <th>Ave Rating</th>
      <th>Total Earnings</th>
      <th>Trip Dates</th>
    </tr>
  </thead>

  <tbody>
  <% @drivers.each do |driver| %>
    <tr>
      <td>
        <%= link_to 'Details', driver_path(driver.id) %>
        <%= link_to 'Edit', edit_driver_path(driver.id) %>
        <%= link_to 'Delete', driver_path(driver.id), method: :destroy %>
      </td>
      <td><%= driver.name %></td>
      <td><%= driver.vin %></td>
      <td><%= driver.available %></td>
      <td><%= driver.avg_rating %></td>
      <td>$<%= driver.total_earnings %></td>
      <td>
        <% Trip.where(driver_id: driver.id).each do |trip| %>
          <%= trip.date %>
          <%= link_to "info", trip_path(trip.id) %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
